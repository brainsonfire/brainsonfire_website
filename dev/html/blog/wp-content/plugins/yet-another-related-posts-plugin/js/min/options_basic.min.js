jQuery(function(a){function e(){var e=a(this).closest("#yarpp_display_web, #yarpp_display_rss");e.length&&(value=e.find(".use_template").val(),e.find(".yarpp_subbox").hide(),e.find(".template_options_"+value).show(),t.apply(e))}function t(){var e=a(this).closest("#yarpp_display_web, #yarpp_display_rss");e.find(".excerpted").toggle(!("builtin"!==e.find(".use_template").val()||!e.find(".show_excerpt input").attr("checked")))}function p(){if(a("#yarpp_display_web .inside").is(":visible")&&(a(".yarpp_code_display").toggle(a("#yarpp_display_code").is(":checked")),a("#yarpp_display_web .yarpp_code_display").is(":visible")&&!_)){_=!0;var e=a("#display_demo_web");a.ajax({type:"POST",url:ajaxurl,data:{action:"yarpp_display_demo",domain:"website",_ajax_nonce:a("#yarpp_display_demo-nonce").val()},beforeSend:function(){e.html(loading)},success:function(a){e.html("<pre>"+a+"</pre>")},dataType:"html"})}}function i(){if(a("#yarpp_display_rss .inside").is(":visible"))if(a("#yarpp-rss_display").is(":checked")){if(a(".rss_displayed").show(),a(".yarpp_code_display").toggle(a("#yarpp_display_code").is(":checked")),a("#yarpp_display_rss .yarpp_code_display").is(":visible")&&!y){y=!0;var t=a("#display_demo_rss");a.ajax({type:"POST",url:ajaxurl,data:{action:"yarpp_display_demo",domain:"rss",_ajax_nonce:a("#yarpp_display_demo-nonce").val()},beforeSend:function(){t.html(loading)},success:function(a){t.html("<pre>"+a+"</pre>")},dataType:"html"})}a("#yarpp_display_rss").each(e)}else a(".rss_displayed").hide()}function n(){function e(e){if(!(e in t)){var i=a("#exclude_"+e);i.find(".loading").length||(p[e]=e in p?p[e]+100:0,a.ajax({type:"POST",url:ajaxurl,data:{action:"yarpp_display_exclude_terms",taxonomy:e,offset:p[e],_ajax_nonce:a("#yarpp_display_exclude_terms-nonce").val()},beforeSend:function(){i.append(loading)},success:function(a){return i.find(".loading").remove(),":("==a?(t[e]=!0,void 0):(i.append(a),void 0)},dataType:"html"}))}}if(!u&&a("#yarpp_pool .inside").is(":visible")){u=!0;var t={},p={};a(".exclude_terms").each(function(){var t,p=jQuery(this).attr("id");p&&(t=p.replace("exclude_",""),e(t),a("#exclude_"+t).parent(".yarpp_scroll_wrapper").scroll(function(){var p=a(this),i=p.children("div");p.scrollTop()+p.height()>i.height()-10&&e(t)}))})}}function s(e){a("#tab-link-"+e+" a").click(),a("#contextual-help-link").click()}function o(){var e=a(this).find("option:selected"),t=e.closest(".yarpp_form_row");e.attr("data-url")?t.find(".template_author_wrap").toggle(!!e.attr("data-author")).find("span").empty().append("<a>"+e.attr("data-author")+"</a>").attr("href",e.attr("data-url")):t.find(".template_author_wrap").toggle(!!e.attr("data-author")).find("span").text(e.attr("data-author")),t.find(".template_description_wrap").toggle(!!e.attr("data-description")).find("span").text(e.attr("data-description")),t.find(".template_file_wrap").toggle(!!e.attr("data-basename")).find("span").text(e.attr("data-basename"))}function l(){if(a("#optin_data_frame").is(":visible")&&!h){h=!0;var e=a("#optin_data_frame");a.ajax({type:"POST",url:ajaxurl,data:{action:"yarpp_optin_data",_ajax_nonce:a("#yarpp_optin_data-nonce").val()},beforeSend:function(){e.html(loading)},success:function(a){e.html("<pre>"+a+"</pre>")},dataType:"html"})}}function r(){setTimeout(l,0)}function d(){var e=a(this).find("input").attr("value");a(this).hasClass("sync_no_results")&&a(".sync_no_results input").attr("value",e),a(this).hasClass("sync_rss_no_results")&&a(".sync_rss_no_results input").attr("value",e)}function c(){var e=a(".yarpp_form_post_types").is(":has(input[type=checkbox]:checked)");a("#yarpp-auto_display_archive").attr("disabled",!e),e||a("#yarpp-auto_display_archive").attr("checked",!1)}postboxes.add_postbox_toggles(pagenow),a(".use_template").each(e).change(e),a(".show_excerpt, .use_template, #yarpp-rss_display").click(t);var _=!1;a("#yarpp_display_web .handlediv, #yarpp_display_web-hide").click(p),p();var y=!1;a("#yarpp-rss_display, #yarpp_display_rss .handlediv, #yarpp_display_rss-hide").click(i),i();var u=!1;a("#yarpp_pool .handlediv, #yarpp_pool-hide").click(n),n(),a("#yarpp-optin-learnmore").click(function(){s("optin")}),a("#yarpp-help-cpt").click(function(){s("dev")}),"#help-optin"==location.hash&&setTimeout(function(){s("optin")}),a(".yarpp_help[data-help]").hover(function(){var e=a(this),t="<p>"+e.attr("data-help")+"</p>",p={content:t,position:{edge:isRtl?"right":"left",align:"center",of:e},document:{body:e}},i=e.pointer(p).pointer("open");e.closest(".yarpp_form_row, p").mouseleave(function(){i.pointer("close")})}),a(".yarpp_template_button[data-help]").hover(function(){var e=a(this),t="<p>"+e.attr("data-help")+"</p>",p={content:t,position:{edge:"bottom",of:e},document:{body:e}},i=e.pointer(p).pointer("open");e.mouseleave(function(){i.pointer("close")})}),a(".yarpp_template_button:not(.disabled)").click(function(){a(this).siblings("input").val(a(this).attr("data-value")).change(),a(this).siblings().removeClass("active"),a(this).addClass("active")}),a(".yarpp_copy_templates_button").live("click",function(){window.location=window.location+(window.location.search.length?"&":"?")+"action=copy_templates&_ajax_nonce="+a("#yarpp_copy_templates-nonce").val()}),a("#template_file, #rss_template_file").each(o).change(o);var h=!1;a("#yarpp-optin-learnmore, a[aria-controls=tab-panel-optin]").bind("click focus",r),r(),a(".sync_no_results, .sync_rss_no_results").change(d),a("#yarpp_display_code").click(function(){var e={action:"yarpp_set_display_code",_ajax_nonce:a("#yarpp_set_display_code-nonce").val()};a(this).is(":checked")&&(e.checked=!0),a.ajax({type:"POST",url:ajaxurl,data:e}),p(),i()}),a(".yarpp_form_post_types input[type=checkbox]").change(c),c(),a("#yarpp_fulltext_expand").click(function(e){e.preventDefault();var t=a("#yarpp_fulltext_details");t.slideToggle(),t.hasClass("hidden")?(t.removeClass("hidden"),a(this).text("Hide Details [-]")):(t.addClass("hidden"),a(this).text("Show Details [+]"))})});