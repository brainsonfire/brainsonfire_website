window.autosave=function(){return!0},function(t,e){function n(){function n(e){var n,o,a,s=(new Date).getTime(),i=[],r="undefined"!=typeof tinymce&&tinymce.get("content");return r&&!r.isHidden()&&s-3e3>u&&(r.save(),u=s),a={post_id:t("#post_ID").val()||0,post_type:t("#post_type").val()||"",post_author:t("#post_author").val()||"",post_title:t("#title").val()||"",content:t("#content").val()||"",excerpt:t("#excerpt").val()||""},"local"===e?a:(t('input[id^="in-category-"]:checked').each(function(){i.push(this.value)}),a.catslist=i.join(","),(n=t("#post_name").val())&&(a.post_name=n),(o=t("#parent_id").val())&&(a.parent_id=o),t("#comment_status").prop("checked")&&(a.comment_status="open"),t("#ping_status").prop("checked")&&(a.ping_status="open"),"1"===t("#auto_draft").val()&&(a.auto_draft="1"),a)}function o(e){return"object"==typeof e?(e.post_title||"")+"::"+(e.content||"")+"::"+(e.excerpt||""):(t("#title").val()||"")+"::"+(t("#content").val()||"")+"::"+(t("#excerpt").val()||"")}function a(){p.trigger("autosave-disable-buttons"),setTimeout(s,5e3)}function s(){p.trigger("autosave-enable-buttons")}function i(){function a(){var t=Math.random().toString(),n=!1;try{e.sessionStorage.setItem("wp-test",t),n=e.sessionStorage.getItem("wp-test")===t,e.sessionStorage.removeItem("wp-test")}catch(o){}return x=n,n}function s(){var t=!1;return x&&y&&(t=sessionStorage.getItem("wp-autosave-"+y),t=t?JSON.parse(t):{}),t}function i(t){var e;return x&&y?(e="wp-autosave-"+y,sessionStorage.setItem(e,JSON.stringify(t)),null!==sessionStorage.getItem(e)):!1}function r(){var t=s();return t&&b?t["post_"+b]||!1:!1}function u(t){var e=s();if(!e||!b)return!1;if(t)e["post_"+b]=t;else{if(!e.hasOwnProperty("post_"+b))return!1;delete e["post_"+b]}return i(e)}function v(){I=!0}function l(){I=!1}function f(e){var a,s,i=!1;return I||!x?!1:(e?(a=r()||{},t.extend(a,e)):a=n("local"),s=o(a),"undefined"==typeof k&&(k=c),s===k?!1:(a.save_time=(new Date).getTime(),a.status=t("#post_status").val()||"",i=u(a),i&&(k=s),i))}function d(){b=t("#post_ID").val()||0,t("#wp-content-wrap").hasClass("tmce-active")?p.on("tinymce-editor-init.autosave",function(){e.setTimeout(function(){m()},1500)}):m(),S=e.setInterval(f,15e3),t("form#post").on("submit.autosave-local",function(){var e="undefined"!=typeof tinymce&&tinymce.get("content"),n=t("#post_ID").val()||0;e&&!e.isHidden()?e.on("submit",function(){f({post_title:t("#title").val()||"",content:t("#content").val()||"",excerpt:t("#excerpt").val()||""})}):f({post_title:t("#title").val()||"",content:t("#content").val()||"",excerpt:t("#excerpt").val()||""}),wpCookies.set("wp-saving-post",n+"-check",86400)})}function g(t,e){function n(t){return t.toString().replace(/[\x20\t\r\n\f]+/g,"")}return n(t||"")===n(e||"")}function m(){var e,n,o,a,s=r(),i=wpCookies.get("wp-saving-post");return i===b+"-saved"?(wpCookies.remove("wp-saving-post"),u(!1),void 0):(s&&(t("#has-newer-autosave").length||(e=t("#content").val()||"",n=t("#title").val()||"",o=t("#excerpt").val()||"",g(e,s.content)&&g(n,s.post_title)&&g(o,s.excerpt)||(h=s,_={content:e,post_title:n,excerpt:o},a=t("#local-storage-notice"),t(".wrap h2").first().after(a.addClass("updated").show()),a.on("click.autosave-local",function(e){var n=t(e.target);n.hasClass("restore-backup")?(w(h),n.parent().hide(),t(this).find("p.undo-restore").show()):n.hasClass("undo-restore-backup")&&(w(_),n.parent().hide(),t(this).find("p.local-restore").show()),e.preventDefault()})))),void 0)}function w(e){var n;return e?(k=o(e),t("#title").val()!==e.post_title&&t("#title").focus().val(e.post_title||""),t("#excerpt").val(e.excerpt||""),n="undefined"!=typeof tinymce&&tinymce.get("content"),n&&!n.isHidden()&&"undefined"!=typeof switchEditors?(n.undoManager.add(),n.setContent(e.content?switchEditors.wpautop(e.content):"")):(t("#content-html").click(),t("#content").val(e.content)),!0):!1}var h,_,y,b,x,S,k,I=!1;return y="undefined"!=typeof e.autosaveL10n&&e.autosaveL10n.blog_id,a()&&y&&(t("#content").length||t("#excerpt").length)&&p.ready(d),{hasStorage:x,getSavedPostData:r,save:f,suspend:v,resume:l}}function r(){function i(){m=!0,e.clearTimeout(w),w=e.setTimeout(function(){m=!1},1e4)}function r(){b=!0}function u(){b=!1}function v(e){g(),m=!1,_=h,h="",p.trigger("after-autosave",[e]),s(),e.success&&t("#auto_draft").val("")}function l(){y=0,wp.heartbeat.connectNow()}function f(){return o()!==c}function d(){var s,r;return b||m||!e.autosave()?!1:(new Date).getTime()<y?!1:(s=n(),r=o(s),"undefined"==typeof _&&(_=c),r===_?!1:(h=r,i(),a(),p.trigger("wpcountwords",[s.content]).trigger("before-autosave",[s]),s._wpnonce=t("#_wpnonce").val()||"",s))}function g(){y=(new Date).getTime()+1e3*autosaveL10n.autosaveInterval||6e4}var m,w,h,_,y=0,b=!1;return p.on("heartbeat-send.autosave",function(t,e){var n=d();n&&(e.wp_autosave=n)}).on("heartbeat-tick.autosave",function(t,e){e.wp_autosave&&v(e.wp_autosave)}).on("heartbeat-connection-lost.autosave",function(e,n,o){if("timeout"===n||603===o){var s=t("#lost-connection-notice");wp.autosave.local.hasStorage||s.find(".hide-if-no-sessionstorage").hide(),s.show(),a()}}).on("heartbeat-connection-restored.autosave",function(){t("#lost-connection-notice").hide(),s()}).ready(function(){g()}),{tempBlockSave:i,triggerSave:l,postChanged:f,suspend:r,resume:u}}var c,u=0,p=t(document);return p.on("tinymce-editor-init.autosave",function(t,n){"content"===n.id&&e.setTimeout(function(){n.save(),c=o()},1e3)}).ready(function(){c=o()}),{getPostData:n,getCompareString:o,disableButtons:a,enableButtons:s,local:i(),server:r()}}e.wp=e.wp||{},e.wp.autosave=n()}(jQuery,window);