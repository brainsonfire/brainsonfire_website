window.wp=window.wp||{},jQuery(document).ready(function(t){function e(){var t=p.width();j={windowHeight:p.height(),windowWidth:t,adminBarHeight:t>600?u.outerHeight():0,toolsHeight:m.outerHeight()||0,menuBarHeight:C.outerHeight()||0,visualTopHeight:b.outerHeight()||0,textTopHeight:B.outerHeight()||0,bottomHeight:v.outerHeight()||0,statusBarHeight:O.outerHeight()||0,sideSortablesHeight:S.height()||0},j.menuBarHeight<3&&(j.menuBarHeight=0)}function i(t){var e,i,o,n,s,d=jQuery.ui.keyCode,a=t.keyCode,h=document.createRange(),r=T[0].selectionStart,w=T[0].selectionEnd,g=y[0].firstChild,p=10;if(!r||!w||r===w){try{h.setStart(g,r),h.setEnd(g,w+1)}catch(f){}e=h.getBoundingClientRect(),e.height&&(i=e.top-p,o=i+e.height+p,n=j.adminBarHeight+j.toolsHeight+j.textTopHeight,s=j.windowHeight-j.bottomHeight,n>i&&(a===d.UP||a===d.LEFT||a===d.BACKSPACE)?window.scrollTo(window.pageXOffset,i+window.pageYOffset-n):o>s&&window.scrollTo(window.pageXOffset,o+window.pageYOffset-s))}}function o(){if(!(w&&!w.isHidden()||!w&&"tinymce"===N)){var t,e=T.height();y.width(T.width()-22),y.text(T.val()+"&nbsp;"),t=y.height(),F>t&&(t=F),t!==e&&(T.height(t),n())}}function n(t){if(!A||!A.settings.visible){var i,n,s,d,a,h,r,g,u,l=p.scrollTop(),R="scroll"!==t,Y=w&&!w.isHidden(),X=F,N=z.offset().top,D=1,Q=H.width();(R||!j.windowHeight)&&e(),Y||"resize"!==t||o(),Y?(i=b,n=x,r=j.visualTopHeight):(i=B,n=T,r=j.textTopHeight),h=i.parent().offset().top,g=n.offset().top,u=n.outerHeight(),a=Y?F+r:F+20,a=u>a+5,a?((!_||R)&&l>=h-j.toolsHeight-j.adminBarHeight&&l<=h-j.toolsHeight-j.adminBarHeight+u-X?(_=!0,m.css({position:"fixed",top:j.adminBarHeight,width:Q}),Y&&C.length&&C.css({position:"fixed",top:j.adminBarHeight+j.toolsHeight,width:Q-2*D-(Y?0:i.outerWidth()-i.width())}),i.css({position:"fixed",top:j.adminBarHeight+j.toolsHeight+j.menuBarHeight,width:Q-2*D-(Y?0:i.outerWidth()-i.width())})):(_||R)&&(l<=h-j.toolsHeight-j.adminBarHeight?(_=!1,m.css({position:"absolute",top:0,width:Q}),Y&&C.length&&C.css({position:"absolute",top:0,width:Q-2*D}),i.css({position:"absolute",top:j.menuBarHeight,width:Q-2*D-(Y?0:i.outerWidth()-i.width())})):l>=h-j.toolsHeight-j.adminBarHeight+u-X&&(_=!1,m.css({position:"absolute",top:u-X,width:Q}),Y&&C.length&&C.css({position:"absolute",top:u-X,width:Q-2*D}),i.css({position:"absolute",top:u-X+j.menuBarHeight,width:Q-2*D-(Y?0:i.outerWidth()-i.width())}))),(!W||R)&&l+j.windowHeight<=g+u+j.bottomHeight+j.statusBarHeight+D?(W=!0,O.css({position:"fixed",bottom:j.bottomHeight,width:Q-2*D}),v.css({position:"fixed",bottom:0,width:Q})):(W||R)&&l+j.windowHeight>g+u+j.bottomHeight+j.statusBarHeight-D&&(W=!1,O.add(v).attr("style",""))):R&&(m.css({position:"absolute",top:0,width:Q}),Y&&C.length&&C.css({position:"absolute",top:0,width:Q-2*D}),i.css({position:"absolute",top:j.menuBarHeight,width:Q-2*D-(Y?0:i.outerWidth()-i.width())}),O.add(v).attr("style","")),E.width()<300&&j.windowWidth>600&&f.height()>S.height()+N+120&&j.windowHeight<u?(j.sideSortablesHeight+K+L>j.windowHeight||k||P?N>=l+K?(S.attr("style",""),k=P=!1):l>U?k?(k=!1,s=S.offset().top-j.adminBarHeight,d=c.offset().top,d<s+j.sideSortablesHeight+L&&(s=d-j.sideSortablesHeight-12),S.css({position:"absolute",top:s,bottom:""})):!P&&j.sideSortablesHeight+S.offset().top+L<l+j.windowHeight&&(P=!0,S.css({position:"fixed",top:"auto",bottom:L})):U>l&&(P?(P=!1,s=S.offset().top-L,d=c.offset().top,d<s+j.sideSortablesHeight+L&&(s=d-j.sideSortablesHeight-12),S.css({position:"absolute",top:s,bottom:""})):!k&&S.offset().top>=l+K&&(k=!0,S.css({position:"fixed",top:K,bottom:""}))):(l>=N-K?S.css({position:"fixed",top:K}):S.attr("style",""),k=P=!1),U=l):(S.attr("style",""),k=P=!1),R&&(H.css({paddingTop:j.toolsHeight}),Y?x.css({paddingTop:j.visualTopHeight+j.menuBarHeight}):(T.css({marginTop:j.textTopHeight}),y.width(Q-20-2*D)))}}function s(){o(),n()}function d(t){for(var e=1;6>e;e++)setTimeout(t,500*e)}function a(){clearTimeout(g),g=setTimeout(n,100)}function h(){window.pageYOffset&&window.pageYOffset>X&&window.scrollTo(window.pageXOffset,0),l.addClass("wp-editor-expand"),p.on("scroll.editor-expand resize.editor-expand",function(t){n(t.type),a()}),f.on("wp-collapse-menu.editor-expand postboxes-columnchange.editor-expand editor-classchange.editor-expand",n).on("postbox-toggled.editor-expand",function(){!k&&!P&&window.pageYOffset>K&&(P=!0,window.scrollBy(0,-1),n(),window.scrollBy(0,1)),n()}),T.on("focus.editor-expand input.editor-expand propertychange.editor-expand",o),T.on("keyup.editor-expand",i),R(),A&&A.pubsub.subscribe("hidden",s),w&&(w.settings.wp_autoresize_on=!0,w.execCommand("wpAutoResizeOn"),w.isHidden()||w.execCommand("wpAutoResize")),(!w||w.isHidden())&&o(),n()}function r(){var e=window.getUserSetting("ed_size");window.pageYOffset&&window.pageYOffset>X&&window.scrollTo(window.pageXOffset,0),l.removeClass("wp-editor-expand"),p.off(".editor-expand"),f.off(".editor-expand"),T.off(".editor-expand"),Y(),A&&A.pubsub.unsubscribe("hidden",s),t.each([b,B,m,C,v,O,H,x,T,S],function(t,e){e&&e.attr("style","")}),_=W=k=P=!1,w&&(w.settings.wp_autoresize_on=!1,w.execCommand("wpAutoResizeOff"),w.isHidden()||(T.hide(),e&&w.theme.resizeTo(null,e))),e&&T.height(e)}var w,g,p=t(window),f=t(document),u=t("#wpadminbar"),c=t("#wpfooter"),l=t("#postdivrich"),H=t("#wp-content-wrap"),m=t("#wp-content-editor-tools"),b=t(),x=t(),B=t("#ed_toolbar"),T=t("#content"),y=t('<div id="content-textarea-clone"></div>'),v=t("#post-status-info"),C=t(),O=t(),S=t("#side-sortables"),E=t("#postbox-container-1"),z=t("#post-body"),A=window.wp.editor&&window.wp.editor.fullscreen,R=function(){},Y=function(){},_=!1,W=!1,k=!1,P=!1,U=0,X=130,K=56,L=20,F=300,N=window.getUserSetting("editor"),j={windowHeight:0,windowWidth:0,adminBarHeight:0,toolsHeight:0,menuBarHeight:0,visualTopHeight:0,textTopHeight:0,bottomHeight:0,statusBarHeight:0,sideSortablesHeight:0};y.insertAfter(T),y.css({"font-family":T.css("font-family"),"font-size":T.css("font-size"),"line-height":T.css("line-height"),"white-space":"pre-wrap","word-wrap":"break-word"}),f.on("tinymce-editor-init.editor-expand",function(t,e){function i(){var t,i,o=e.selection.getNode();return i=e.plugins.wpview&&(t=e.plugins.wpview.getView(o))?t.getBoundingClientRect():o.getBoundingClientRect(),i.height?i:!1}function s(t){var o,n,s,d,a=tinymce.util.VK,h=t.keyCode,r=i(),w=10;r&&(47>=h&&h!==a.SPACEBAR&&h!==a.ENTER&&h!==a.DELETE&&h!==a.BACKSPACE&&h!==a.UP&&h!==a.LEFT&&h!==a.DOWN&&h!==a.UP||h>=91&&93>=h||h>=112&&123>=h||144===h||145===h||(o=r.top+e.iframeElement.getBoundingClientRect().top,n=o+r.height,o-=w,n+=w,s=j.adminBarHeight+j.toolsHeight+j.menuBarHeight+j.visualTopHeight,d=j.windowHeight-j.bottomHeight-j.statusBarHeight,d-s<r.height||(s>o&&(h===a.UP||h===a.LEFT||h===a.BACKSPACE)?window.scrollTo(window.pageXOffset,o+window.pageYOffset-s):n>d&&window.scrollTo(window.pageXOffset,n+window.pageYOffset-d))))}function a(){setTimeout(function(){e.execCommand("wpAutoResize"),n()},300)}function h(){setTimeout(function(){var t=H.offset().top;window.pageYOffset>t&&window.scrollTo(window.pageXOffset,t-j.adminBarHeight),o(),n()},100),n()}"content"===e.id&&(w=e,e.settings.autoresize_min_height=F,b=H.find(".mce-toolbar-grp"),x=H.find(".mce-edit-area"),O=H.find(".mce-statusbar"),C=H.find(".mce-menubar"),R=function(){e.on("keyup",s),e.on("show",a),e.on("hide",h),e.on("setcontent wp-autoresize wp-toolbar-toggle",n)},Y=function(){e.off("keyup",s),e.off("show",a),e.off("hide",h),e.off("setcontent wp-autoresize wp-toolbar-toggle",n)},l.hasClass("wp-editor-expand")&&(R(),d(n)))}),l.hasClass("wp-editor-expand")&&(h(),H.hasClass("html-active")&&d(function(){n(),o()})),t("#adv-settings .editor-expand").show(),t("#editor-expand-toggle").on("change.editor-expand",function(){t(this).prop("checked")?(h(),window.setUserSetting("editor_expand","on")):(r(),window.setUserSetting("editor_expand","off"))}),window.editorExpand={on:h,off:r}});