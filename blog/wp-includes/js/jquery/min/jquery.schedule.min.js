!function($){$.scheduler=function(){this.bucket={}},$.scheduler.prototype={schedule:function(){function _isfn(e){return!!e&&"string"!=typeof e&&"undefined"==typeof e[0]&&RegExp("function","i").test(e+"")}var ctx={id:null,time:1e3,repeat:!1,protect:!1,obj:null,func:function(){},args:[]},i=0,override=!1;if("object"==typeof arguments[i]&&arguments.length>1&&(override=!0,i++),"object"==typeof arguments[i]){for(var option in arguments[i])"undefined"!=typeof ctx[option]&&(ctx[option]=arguments[i][option]);i++}for(("number"==typeof arguments[i]||"string"==typeof arguments[i]&&arguments[i].match(RegExp("^[0-9]+[smhdw]$")))&&(ctx.time=arguments[i++]),"boolean"==typeof arguments[i]&&(ctx.repeat=arguments[i++]),"boolean"==typeof arguments[i]&&(ctx.protect=arguments[i++]),"object"==typeof arguments[i]&&"string"==typeof arguments[i+1]&&_isfn(arguments[i][arguments[i+1]])?(ctx.obj=arguments[i++],ctx.func=arguments[i++]):"undefined"==typeof arguments[i]||!_isfn(arguments[i])&&"string"!=typeof arguments[i]||(ctx.func=arguments[i++]);"undefined"!=typeof arguments[i];)ctx.args.push(arguments[i++]);if(override){if("object"==typeof arguments[1])for(var option in arguments[0])"undefined"!=typeof ctx[option]&&"undefined"==typeof arguments[1][option]&&(ctx[option]=arguments[0][option]);else for(var option in arguments[0])"undefined"!=typeof ctx[option]&&(ctx[option]=arguments[0][option]);i++}ctx._scheduler=this,ctx._handle=null;var match=String(ctx.time).match(RegExp("^([0-9]+)([smhdw])$"));return match&&"undefined"!=match[0]&&"undefined"!=match[1]&&(ctx.time=String(parseInt(match[1])*{s:1e3,m:6e4,h:36e5,d:864e5,w:6048e5}[match[2]])),null==ctx.id&&(ctx.id=String(ctx.repeat)+":"+String(ctx.protect)+":"+String(ctx.time)+":"+String(ctx.obj)+":"+String(ctx.func)+":"+String(ctx.args)),ctx.protect&&"undefined"!=typeof this.bucket[ctx.id]?this.bucket[ctx.id]:(_isfn(ctx.func)||(ctx.func=null!=ctx.obj&&"object"==typeof ctx.obj&&"string"==typeof ctx.func&&_isfn(ctx.obj[ctx.func])?ctx.obj[ctx.func]:eval("function () { "+ctx.func+" }")),ctx._handle=this._schedule(ctx),this.bucket[ctx.id]=ctx,ctx)},reschedule:function(e){return"string"==typeof e&&(e=this.bucket[e]),e._handle=this._schedule(e),e},_schedule:function(e){var t=function(){var t=null!=e.obj?e.obj:e;e.func.apply(t,e.args),"undefined"!=typeof e._scheduler.bucket[e.id]&&e.repeat?e._scheduler._schedule(e):delete e._scheduler.bucket[e.id]};return setTimeout(t,e.time)},cancel:function(e){"string"==typeof e&&(e=this.bucket[e]),"object"==typeof e&&(clearTimeout(e._handle),delete this.bucket[e.id])}},$.extend({scheduler$:new $.scheduler,schedule:function(){return $.scheduler$.schedule.apply($.scheduler$,arguments)},reschedule:function(){return $.scheduler$.reschedule.apply($.scheduler$,arguments)},cancel:function(){return $.scheduler$.cancel.apply($.scheduler$,arguments)}}),$.fn.extend({schedule:function(){for(var e=[{}],t=0;t<arguments.length;t++)e.push(arguments[t]);return this.each(function(){return e[0]={id:this,obj:this},$.schedule.apply($,e)})}})}(jQuery);