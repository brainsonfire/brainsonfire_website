!function(e){var t,n={add:"ajaxAdd",del:"ajaxDel",dim:"ajaxDim",process:"process",recolor:"recolor"};t={settings:{url:ajaxurl,type:"POST",response:"ajax-response",what:"",alt:"alternate",altOffset:0,addColor:null,delColor:null,dimAddColor:null,dimDelColor:null,confirm:null,addBefore:null,addAfter:null,delBefore:null,delAfter:null,dimBefore:null,dimAfter:null},nonce:function(t,n){var s=wpAjax.unserialize(t.attr("href"));return n.nonce||s._ajax_nonce||e("#"+n.element+' input[name="_ajax_nonce"]').val()||s._wpnonce||e("#"+n.element+' input[name="_wpnonce"]').val()||0},parseData:function(t,n){var s,a=[];try{s=e(t).attr("data-wp-lists")||"",s=s.match(new RegExp(n+":[\\S]+")),s&&(a=s[0].split(":"))}catch(i){}return a},pre:function(t,n,s){var a,i;return n=e.extend({},this.wpList.settings,{element:null,nonce:0,target:t.get(0)},n||{}),e.isFunction(n.confirm)&&("add"!=s&&(a=e("#"+n.element).css("backgroundColor"),e("#"+n.element).css("backgroundColor","#FF9966")),i=n.confirm.call(this,t,n,s,a),"add"!=s&&e("#"+n.element).css("backgroundColor",a),!i)?!1:n},ajaxAdd:function(n,s){n=e(n),s=s||{};var a,i,o,l,r,d=this,c=t.parseData(n,"add");return s=t.pre.call(d,n,s,"add"),s.element=c[2]||n.attr("id")||s.element||null,s.addColor=c[3]?"#"+c[3]:s.addColor||"#FFFF33",s?n.is('[id="'+s.element+'-submit"]')?s.element?(s.action="add-"+s.what,s.nonce=t.nonce(n,s),a=e("#"+s.element+" :input").not('[name="_ajax_nonce"], [name="_wpnonce"], [name="action"]'),(i=wpAjax.validateForm("#"+s.element))?(s.data=e.param(e.extend({_ajax_nonce:s.nonce,action:s.action},wpAjax.unserialize(c[4]||""))),o=e.isFunction(a.fieldSerialize)?a.fieldSerialize():a.serialize(),o&&(s.data+="&"+o),e.isFunction(s.addBefore)&&(s=s.addBefore(s),!s)?!0:s.data.match(/_ajax_nonce=[a-f0-9]+/)?(s.success=function(n){return l=wpAjax.parseAjaxResponse(n,s.response,s.element),r=n,!l||l.errors?!1:!0===l?!0:(jQuery.each(l.responses,function(){t.add.call(d,this.data,e.extend({},s,{pos:this.position||0,id:this.id||0,oldId:this.oldId||null}))}),d.wpList.recolor(),e(d).trigger("wpListAddEnd",[s,d.wpList]),t.clear.call(d,"#"+s.element),void 0)},s.complete=function(t,n){if(e.isFunction(s.addAfter)){var a=e.extend({xml:t,status:n,parsed:l},s);s.addAfter(r,a)}},e.ajax(s),!1):!0):!1):!0:!t.add.call(d,n,s):!1},ajaxDel:function(n,s){n=e(n),s=s||{};var a,i,o,l=this,r=t.parseData(n,"delete");return s=t.pre.call(l,n,s,"delete"),s.element=r[2]||s.element||null,s.delColor=r[3]?"#"+r[3]:s.delColor||"#faa",s&&s.element?(s.action="delete-"+s.what,s.nonce=t.nonce(n,s),s.data=e.extend({action:s.action,id:s.element.split("-").pop(),_ajax_nonce:s.nonce},wpAjax.unserialize(r[4]||"")),e.isFunction(s.delBefore)&&(s=s.delBefore(s,l),!s)?!0:s.data._ajax_nonce?(a=e("#"+s.element),"none"!=s.delColor?a.css("backgroundColor",s.delColor).fadeOut(350,function(){l.wpList.recolor(),e(l).trigger("wpListDelEnd",[s,l.wpList])}):(l.wpList.recolor(),e(l).trigger("wpListDelEnd",[s,l.wpList])),s.success=function(t){return i=wpAjax.parseAjaxResponse(t,s.response,s.element),o=t,!i||i.errors?(a.stop().stop().css("backgroundColor","#faa").show().queue(function(){l.wpList.recolor(),e(this).dequeue()}),!1):void 0},s.complete=function(t,n){e.isFunction(s.delAfter)&&a.queue(function(){var a=e.extend({xml:t,status:n,parsed:i},s);s.delAfter(o,a)}).dequeue()},e.ajax(s),!1):!0):!1},ajaxDim:function(n,s){if("none"==e(n).parent().css("display"))return!1;n=e(n),s=s||{};var a,i,o,l,r,d,c=this,u=t.parseData(n,"dim");return s=t.pre.call(c,n,s,"dim"),s.element=u[2]||s.element||null,s.dimClass=u[3]||s.dimClass||null,s.dimAddColor=u[4]?"#"+u[4]:s.dimAddColor||"#FFFF33",s.dimDelColor=u[5]?"#"+u[5]:s.dimDelColor||"#FF3333",s&&s.element&&s.dimClass?(s.action="dim-"+s.what,s.nonce=t.nonce(n,s),s.data=e.extend({action:s.action,id:s.element.split("-").pop(),dimClass:s.dimClass,_ajax_nonce:s.nonce},wpAjax.unserialize(u[6]||"")),e.isFunction(s.dimBefore)&&(s=s.dimBefore(s),!s)?!0:(a=e("#"+s.element),i=a.toggleClass(s.dimClass).is("."+s.dimClass),o=t.getColor(a),a.toggleClass(s.dimClass),l=i?s.dimAddColor:s.dimDelColor,"none"!=l?a.animate({backgroundColor:l},"fast").queue(function(){a.toggleClass(s.dimClass),e(this).dequeue()}).animate({backgroundColor:o},{complete:function(){e(this).css("backgroundColor",""),e(c).trigger("wpListDimEnd",[s,c.wpList])}}):e(c).trigger("wpListDimEnd",[s,c.wpList]),s.data._ajax_nonce?(s.success=function(t){return r=wpAjax.parseAjaxResponse(t,s.response,s.element),d=t,!r||r.errors?(a.stop().stop().css("backgroundColor","#FF3333")[i?"removeClass":"addClass"](s.dimClass).show().queue(function(){c.wpList.recolor(),e(this).dequeue()}),!1):void 0},s.complete=function(t,n){e.isFunction(s.dimAfter)&&a.queue(function(){var a=e.extend({xml:t,status:n,parsed:r},s);s.dimAfter(d,a)}).dequeue()},e.ajax(s),!1):!0)):!0},getColor:function(e){var t=jQuery(e).css("backgroundColor");return t||"#ffffff"},add:function(n,s){n="string"==typeof n?e(e.trim(n)):e(n);var a,i,o,l=e(this),r=!1,d={pos:0,id:0,oldId:null};return"string"==typeof s&&(s={what:s}),s=e.extend(d,this.wpList.settings,s),n.size()&&s.what?(s.oldId&&(r=e("#"+s.what+"-"+s.oldId)),!s.id||s.id==s.oldId&&r&&r.size()||e("#"+s.what+"-"+s.id).remove(),r&&r.size()?(r.before(n),r.remove()):isNaN(s.pos)?(a="after","-"==s.pos.substr(0,1)&&(s.pos=s.pos.substr(1),a="before"),i=l.find("#"+s.pos),1===i.size()?i[a](n):l.append(n)):("comment"!=s.what||0===e("#"+s.element).length)&&(s.pos<0?l.prepend(n):l.append(n)),s.alt&&((l.children(":visible").index(n[0])+s.altOffset)%2?n.removeClass(s.alt):n.addClass(s.alt)),"none"!=s.addColor&&(o=t.getColor(n),n.css("backgroundColor",s.addColor).animate({backgroundColor:o},{complete:function(){e(this).css("backgroundColor","")}})),l.each(function(){this.wpList.process(n)}),n):!1},clear:function(t){var n,s,a=this;t=e(t),a.wpList&&t.parents("#"+a.id).size()||t.find(":input").each(function(){e(this).parents(".form-no-clear").size()||(n=this.type.toLowerCase(),s=this.tagName.toLowerCase(),"text"==n||"password"==n||"textarea"==s?this.value="":"checkbox"==n||"radio"==n?this.checked=!1:"select"==s&&(this.selectedIndex=null))})},process:function(t){var n=this,s=e(t||document);s.delegate('form[data-wp-lists^="add:'+n.id+':"]',"submit",function(){return n.wpList.add(this)}),s.delegate('a[data-wp-lists^="add:'+n.id+':"], input[data-wp-lists^="add:'+n.id+':"]',"click",function(){return n.wpList.add(this)}),s.delegate('[data-wp-lists^="delete:'+n.id+':"]',"click",function(){return n.wpList.del(this)}),s.delegate('[data-wp-lists^="dim:'+n.id+':"]',"click",function(){return n.wpList.dim(this)})},recolor:function(){var t,n,s=this;s.wpList.settings.alt&&(t=e(".list-item:visible",s),t.size()||(t=e(s).children(":visible")),n=[":even",":odd"],s.wpList.settings.altOffset%2&&n.reverse(),t.filter(n[0]).addClass(s.wpList.settings.alt).end().filter(n[1]).removeClass(s.wpList.settings.alt))},init:function(){var e=this;e.wpList.process=function(t){e.each(function(){this.wpList.process(t)})},e.wpList.recolor=function(){e.each(function(){this.wpList.recolor()})}}},e.fn.wpList=function(s){return this.each(function(){var a=this;this.wpList={settings:e.extend({},t.settings,{what:t.parseData(this,"list")[1]||""},s)},e.each(n,function(e,n){a.wpList[e]=function(e,s){return t[n].call(a,e,s)}})}),t.init.call(this),this.wpList.process(),this}}(jQuery);