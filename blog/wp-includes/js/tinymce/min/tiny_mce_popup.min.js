var tinymce,tinyMCE,tinyMCEPopup={init:function(){var e,t,n,o=this;e=o.getWin(),tinymce=tinyMCE=e.tinymce,o.editor=tinymce.EditorManager.activeEditor,o.params=o.editor.windowManager.getParams(),n=o.editor.windowManager.windows[o.editor.windowManager.windows.length-1],o.features=n.features,o.uiWindow=n,t=o.editor.settings,t.popup_css!==!1&&(t.popup_css=t.popup_css?o.editor.documentBaseURI.toAbsolute(t.popup_css):o.editor.baseURI.toAbsolute("plugins/compat3x/css/dialog.css")),t.popup_css_add&&(t.popup_css+=","+o.editor.documentBaseURI.toAbsolute(t.popup_css_add)),o.dom=o.editor.windowManager.createInstance("tinymce.dom.DOMUtils",document,{ownEvents:!0,proxy:tinyMCEPopup._eventProxy}),o.dom.bind(window,"ready",o._onDOMLoaded,o),o.features.popup_css!==!1&&o.dom.loadCSS(o.features.popup_css||o.editor.settings.popup_css),o.listeners=[],o.onInit={add:function(e,t){o.listeners.push({func:e,scope:t})}},o.isWindow=!o.getWindowArg("mce_inline"),o.id=o.getWindowArg("mce_window_id")},getWin:function(){return!window.frameElement&&window.dialogArguments||opener||parent||top},getWindowArg:function(e,t){var n=this.params[e];return tinymce.is(n)?n:t},getParam:function(e,t){return this.editor.getParam(e,t)},getLang:function(e,t){return this.editor.getLang(e,t)},execCommand:function(e,t,n,o){return o=o||{},o.skip_focus=1,this.restoreSelection(),this.editor.execCommand(e,t,n,o)},resizeToInnerSize:function(){},executeOnLoad:function(evil){this.onInit.add(function(){eval(evil)})},storeSelection:function(){this.editor.windowManager.bookmark=tinyMCEPopup.editor.selection.getBookmark(1)},restoreSelection:function(){var e=tinyMCEPopup;!e.isWindow&&tinymce.isIE&&e.editor.selection.moveToBookmark(e.editor.windowManager.bookmark)},requireLangPack:function(){var e,t=this,n=t.getWindowArg("plugin_url")||t.getWindowArg("theme_url"),o=t.editor.settings;o.language!==!1&&(e=o.language||"en"),n&&e&&t.features.translate_i18n!==!1&&o.language_load!==!1&&(n+="/langs/"+e+"_dlg.js",tinymce.ScriptLoader.isDone(n)||(document.write('<script type="text/javascript" src="'+n+'"></script>'),tinymce.ScriptLoader.markDone(n)))},pickColor:function(e,t){this.execCommand("mceColorPicker",!0,{color:document.getElementById(t).value,func:function(e){document.getElementById(t).value=e;try{document.getElementById(t).onchange()}catch(n){}}})},openBrowser:function(e,t){tinyMCEPopup.restoreSelection(),this.editor.execCallback("file_browser_callback",e,document.getElementById(e).value,t,window)},confirm:function(e,t,n){this.editor.windowManager.confirm(e,t,n,window)},alert:function(e,t,n){this.editor.windowManager.alert(e,t,n,window)},close:function(){function e(){t.editor.windowManager.close(window),tinymce=tinyMCE=t.editor=t.params=t.dom=t.dom.doc=null}var t=this;tinymce.isOpera?t.getWin().setTimeout(e,0):e()},_restoreSelection:function(){var e=window.event.srcElement;"INPUT"!=e.nodeName||"submit"!=e.type&&"button"!=e.type||tinyMCEPopup.restoreSelection()},_onDOMLoaded:function(){var e,t,n=tinyMCEPopup,o=document.title;if(n.features.translate_i18n!==!1){var i={update:"Ok",insert:"Ok",cancel:"Cancel",not_set:"--",class_name:"Class name",browse:"Browse"},r=tinymce.settings.language||"en";for(var s in i)tinymce.i18n.data[r+"."+s]=tinymce.i18n.translate(i[s]);e=document.body.innerHTML,tinymce.isIE&&(e=e.replace(/ (value|title|alt)=([^"][^\s>]+)/gi,' $1="$2"')),document.dir=n.editor.getParam("directionality",""),(t=n.editor.translate(e))&&t!=e&&(document.body.innerHTML=t),(t=n.editor.translate(o))&&t!=o&&(document.title=o=t)}n.editor.getParam("browser_preferred_colors",!1)&&n.isWindow||n.dom.addClass(document.body,"forceColors"),document.body.style.display="",tinymce.Env.ie&&(tinymce.Env.ie<11?(document.attachEvent("onmouseup",tinyMCEPopup._restoreSelection),n.dom.add(n.dom.select("head")[0],"base",{target:"_self"})):document.addEventListener("mouseup",tinyMCEPopup._restoreSelection,!1)),n.restoreSelection(),n.resizeToInnerSize(),n.isWindow?window.focus():n.editor.windowManager.setTitle(window,o),tinymce.isIE||n.isWindow||n.dom.bind(document,"focus",function(){n.editor.windowManager.focus(n.id)}),tinymce.each(n.dom.select("select"),function(e){e.onkeydown=tinyMCEPopup._accessHandler}),tinymce.each(n.listeners,function(e){e.func.call(e.scope,n.editor)}),n.getWindowArg("mce_auto_focus",!0)&&(window.focus(),tinymce.each(document.forms,function(e){tinymce.each(e.elements,function(e){return n.dom.hasClass(e,"mceFocus")&&!e.disabled?(e.focus(),!1):void 0})})),document.onkeyup=tinyMCEPopup._closeWinKeyHandler,"textContent"in document?n.uiWindow.getEl("head").firstChild.textContent=document.title:n.uiWindow.getEl("head").firstChild.innerText=document.title},_accessHandler:function(e){if(e=e||window.event,13==e.keyCode||32==e.keyCode){var t=e.target||e.srcElement;return t.onchange&&t.onchange(),tinymce.dom.Event.cancel(e)}},_closeWinKeyHandler:function(e){e=e||window.event,27==e.keyCode&&tinyMCEPopup.close()},_eventProxy:function(e){return function(t){tinyMCEPopup.dom.events.callNativeHandler(e,t)}}};tinyMCEPopup.init(),tinymce.util.Dispatcher=function(e){this.scope=e||this,this.listeners=[],this.add=function(e,t){return this.listeners.push({cb:e,scope:t||this.scope}),e},this.addToTop=function(e,t){var n=this,o={cb:e,scope:t||n.scope};return n.inDispatch?n.listeners=[o].concat(n.listeners):n.listeners.unshift(o),e},this.remove=function(e){var t=this.listeners,n=null;return tinymce.each(t,function(o,i){return e==o.cb?(n=o,t.splice(i,1),!1):void 0}),n},this.dispatch=function(){var e,t,n,o=this,i=arguments,r=o.listeners;for(o.inDispatch=!0,t=0;t<r.length&&(n=r[t],e=n.cb.apply(n.scope,i.length>0?i:[n.scope]),e!==!1);t++);return o.inDispatch=!1,e}};